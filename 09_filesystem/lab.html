<!doctype html>  
<html>
	<head>
		<meta charset="utf-8">
		<title class="l_labname">Lab: Filesystem</title>
		<meta name="description" content="Titanium Certified Development (TCD) Training">
    	<meta name="author" content="Appcelerator, Inc." />
		
		<link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="../../presentation-engine/reveal.js/css/reset.css">
		<link rel="stylesheet" href="../../presentation-engine/reveal.js/css/main.css">
		<link rel="stylesheet" href="../css/magula.css">
		<link rel="stylesheet" href="../css/presentation.css">
		<script type="text/javascript" src="../../presentation-engine/js/l10n.js"></script>
		<script type="text/javascript" src="i18n/lablocalizations.js"></script>
		<style>
		html, body {
			overflow: always !important;
		}
		.slides {
			top: 40% !important;
		}
		</style>
		<script>
		function loadStyleSheet(url){
		    if(document.createStyleSheet) {
		        try {document.createStyleSheet(url);} catch (e) { }
		    }
		    else{
		        var css;
		        css         = document.createElement('link');
		        css.rel     = 'stylesheet';
		        css.type    = 'text/css';
		        css.media   = "all";
		        css.href    = url;
		        document.getElementsByTagName("head")[0].appendChild(css);
		    }
		}
		var browserlang = document.documentElement.lang || String.locale || 'en-US';
		loadStyleSheet('../css/'+browserlang+'.css');
		</script>
		<link rel="stylesheet" href="../../presentation-engine/reveal.js/css/print.css" media="print">
	</head>
	
	<body>
		<div id="reveal">	
<div class="slides">
<div id="labwrapper">			
<section>

<!-- YOUR LAB CONTENT GOES HERE -->
<h1 class="l_labname">Lab - Filesystem</h1>
<p class="l_mission"><img src='labimages/finished_iphone.png' style='height:300px;float:right;margin-top:-40px;margin-bottom: 10px;'><strong>Mission: </strong>You will the image that the user selected from the camera or gallery to the filesystem and associate it with the fugitive's model for later retrieval.</p>

<p class="l_specification"><strong>Specification: </strong>In this lab, you will modify the app created in the preceding lab. You will save the file to the filesystem and update the model so the image can be displayed the next time the user shows the details for a fugitive.<br/><br/>To successfully complete this lab, you must develop an application that meets the following description:</p>

<ul>
	<li class="l_spec1">Save the image's binary data to a file in the application data directory with a name of photo#.png, where # is the fugitive's ID.</li>
	<li class="l_spec2">Set the model's url property equal to the file's native path.</li>
</ul>

<table>
	<tr>
		<td colspan="2" class="labinstructions l_step1">1. Download the starting code for this lab from <a href="http://assets.appcelerator.com.s3.amazonaws.com/app_u/tcd_labs/Starting/09_filesystem.zip">S3: 09_filesystem</a> and unzip the files. Import the project into Titanium Studio. Update the tiapp.xml, if necessary (e.g. to set an appropriate SDK version or build target for your environment).</td>
	</tr>
	<tr>
		<td class="tdfiller"><!-- leave empty--></td>
		<td class="labexplanations l_stepexplanation1"></td>
	</tr>
	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<tr>
	<td colspan="2" class="labinstructions l_labstep2">2. In the FugitiveDetail.js controller, update the success callback in the photo button's event listener.</td>
</tr>
<tr>
	<td class="tdfiller"><!-- leave empty--></td>
	<td class="labexplanations l_labstepexplanation2"></td>
</tr>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<tr>
	<td colspan="2" class="labinstructions l_labstep3">3. Create a file named photo#.png, where # is the model's ID, in the application data directory and write the media to the file system.</td>
</tr>
<tr>
	<td class="tdfiller"><!-- leave empty--></td>
	<td class="labexplanations l_labstepexplanation3"></td>
</tr>
<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<tr>
	<td colspan="2" class="labinstructions l_labstep4">4. Create a variable named <code>fugitiveModel</code> that points to the args.data value. This will represent the current model. Set its url property equal to your file's native path. Save the model. Fetch the records from the collection.</td>
</tr>
<tr>
	<td class="tdfiller"><!-- leave empty--></td>
	<td class="labexplanations l_labstepexplanation4"></td>
</tr>

<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<tr>
	<td colspan="2" class="labinstructions l_labstep5">5. Save all the files. Build your app for the iOS simulator or Android emulator. Correct any problems that exist.</td>
</tr>
<tr>
	<td class="tdfiller"><!-- leave empty--></td>
	<td class="labexplanations l_labstepexplanation5">Your finished app should match the screen shot above. Now when you select an image from the camera or gallery, it should be saved and available the next time you open the details screen for that fugitive.</td>
</tr>

</table>

<h2 class="l_summary">Summary</h2>
<p class="l_summarypara">In this lab, you extended the supplied example app to save the image associated with a fugitive.</p>

<h2 class="l_resources">Resources</h2>

<ul>
	<li class="l_resources1">API docs: Ti.Filesystem <a href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Filesystem">http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Filesystem</a></li>
	<li class="l_resources2">API docs: Ti.File <a href="http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Filesystem.File">http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Filesystem.File</a></li>
	<li class="l_resources3">Finished code for this lab: <a href="http://assets.appcelerator.com.s3.amazonaws.com/app_u/tcd_labs/Finished/09_filesystem.zip">S3: 09_filesystem (finished)</a></li>
</ul>


<!-- MAKE NO CHANGES BELOW THIS LINE -->
</section>
</div>
</div>

			<!-- Appc logo and presenter notes -->
			<div id="appclogo"><a href="../index.html"><img src="../images/appu_thumb.png"/></a></div>

			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>

			<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
			<div class="progress"><span></span></div>
			
		</div>
		
		<script src="../../presentation-engine/reveal.js/js/reveal.js"></script>
		<script src="../../presentation-engine/reveal.js/lib/highlight.js"></script>
		<script>
			// Parse the query string into a key/value object
			var query = {};
			location.search.replace( /[A-Z0-9]+?=(\w*)/gi, function(a) {
				query[ a.split( '=' ).shift() ] = a.split( '=' ).pop();
			} );

			Reveal.initialize({
				// Display controls in the bottom right corner
				controls: true,

				// Display a presentation progress bar
				progress: true,

				// If true; each slide will be pushed to the browser history
				history: true,

				// Flags if mouse wheel navigation should be enabled
				mouseWheel: true,

				// Apply a 3D roll to links on hover
				rollingLinks: true,

				// UI style
				theme: query.theme || 'default', // default/neon

				// Transition style
				transition: query.transition || 'default' // default/cube/page/concave/linear(2d)
			});

			hljs.initHighlightingOnLoad();
		</script>
		<script src="../../presentation-engine/js/localize.js"></script>
		<script>
		var s = (function load(){
			var s = {};
			if(window.outerHeight){
				s = { w: window.outerWidth, h: window.outerHeight};
			}
			else {
				s = { w: document.body.clientWidth, h: document.body.clientHeight};
			}
			return s;
		})();
		if(s.w < 1000 || s.h < 800) {
			var slides = document.querySelectorAll( '#reveal .slides' );
			for( var i = 0, len = slides.length; i < len; i++ ) {
				slides[i].classList.add( 'smallscreen' );
		    }
		}
		</script>
	</body>
</html>
